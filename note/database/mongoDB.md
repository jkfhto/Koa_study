# MongoDB

## 什么是NoSQL?

- NoSQL，指的是非关系型的数据库。NoSQL有时也称作Not Only SQL的缩写，是对不同于传统的关系型数据库的数据库管理系统的统称。
- NoSQL用于超大规模数据的存储。（例如谷歌或Facebook每天为他们的用户收集万亿比特的数据）。这些类型的数据存储不需要固定的模式，无需多余操作就可以横向扩展。

## NoSQL数据库的分类

- 列存储（HBase）：顾名思义，是按列存储数据的。最大的特点是方便存储结构化和半结构化数据，方便做数据压缩，对针对某一列或者某几列的查询有非常大的IO优势
- ```文档存储（MongoDB）```：文档存储一般用类似json的格式存储，存储的内容是文档型的。这样也就有机会对某些字段建立索引，实现关系数据库的某些功能
- Key-value 存储（Redis）：可以通过key快速查询到其value。一般来说，存储不管value的格式，照单全收。通常用于缓存，消息通信
- 图存储（FlockDB）：图形关系的最佳存储。使用传统关系数据库来解决的话性能低下，而且设计使用不方便
- 对象存储（db4o）：通过类似面向对象语言的语法操作数据库，通过对象的方式存取数据
- xml数据库（BaseX）：高效的存储XML数据，并支持XML的内部查询语法，比如XQuery,Xpath

## NoSQL的优点

- 简单（没有原子性，一致性，隔离性等复杂规范）
- 便于横向扩展：简单没有复杂规范等要求所以易于横向扩展，增加服务器数量，提高计算速度以及存储容量
- 适合超大规模的数据存储
- 很灵活的存储复杂结构的数据（Schema Free：不需要遵循严格的表结构，可以像json那样灵活的，自由的存储复杂的数据）
- 分布式计算

## NoSQL的缺点

- 没有标准化
- 有限的查询功能（到目前为止）
- 支持的特性不够丰富：现有产品所提供的功能都比较有限，大多数NoSQL数据库都不支持事务

## 什么是MongoDB?

- MongoDB 是由C++语言编写的，是一个基于分布式文件存储的开源数据库系统。
- 在高负载的情况下，添加更多的节点，可以保证服务器性能。
- MongoDB 旨在为WEB应用提供可扩展的高性能数据存储解决方案。
- MongoDB 将数据存储为一个文档，数据结构由键值(key=>value)对组成。MongoDB 文档类似于 JSON 对象。字段值可以包含其他文档，数组及文档数组

## MongoDB的优点?

- 性能好（内存计算）
- 支持大规模数据存储（可扩展性强且简单）
- 可靠安全（本地复制，自动故障转移）
- 方便存储复杂数据结构（Schema Free）

## 使用 Mongoose 操作 MongoDB 

- [连接数据库](./connect.md)
- [增，删，改，查](./dml.md)

## 其他

- [检测用户id是否合法的中间件](./isValidById.md)：针对```CastError: Cast to ObjectId failed for value```的错误处理
- [查询数据时过滤用户密码等信息](./dml.md)：定义模型（Schema）时设置对象的selelct属性为false，可以在查询数据时过滤相关的数据
